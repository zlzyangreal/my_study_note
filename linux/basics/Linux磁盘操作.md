# 磁盘操作

## 分区与挂载

lsblk 或者  lsblk -f
--------------------
查看设备挂载情况

-f 详细信息

添加一块磁盘
-----------
1   添加磁盘

2   对磁盘分区
* fdisk /dev/[磁盘名]
~~~
    m   显示命令列表
    p   显示磁盘分区(终端 fdisk -l也行)
    n   新增分区
    d   删除分区
    w   写入并退出

    注意：开始分区后输入 n ，新增分区选择 p ，分区类型为主分区，两次回车默认剩余全部空间。最后输入 w 写入分区并退出，若不保存退出输入 q
~~~

3   挂载
* mount /dev/[磁盘名]   /[文件]
~~~
    注意：命令挂载重启后会失效
~~~
* 永久挂载
~~~
    修改/etc/fstab
    添加完成后，执行 mount -a
~~~

磁盘情况查询
-----------

df -h
* 查询系统整体磁盘使用情况

du [选项][目录]
* 查询指定目录的磁盘占用情况，默认当前目录
~~~
-s                  指定目录占大小总汇
-h                  带计量单位
-a                  含文件
-max-depth=[深度]   子目录深度
-c                  列出明细的同时，增加汇总值
~~~

磁盘实用指令
-----------
统计/opt文件夹下文件的个数
* ls -l /opt |grep "^-"| wc -l
~~~
    - 表示普通文件
    wc 用于统计行数
    -l 统计输入行的数量
~~~

统计/opt文件夹下的目录的个数
* ls -l /opt |grep "^d"| wc -l

统计/opt文件夹文件的个数，包括子文件夹里的
* ls -lR /opt |grep "^-"| wc -l

统计/opt文件夹目录的个数，包括子文件夹里的
* ls -lR /opt |grep "^d"| wc -l

* tree [文件夹]
~~~
    查看树状目录
    
    没有tree，使用yum install tree安装
~~~
